一． 在VMware设置中添加或者扩展硬盘，或者挂载一块新物理硬盘

如果是虚拟机设置，可以点击添加一个硬盘一直下一步就可以，也可以选择扩展输入想扩展后的硬盘大小点击扩展就可以

![image](https://github.com/dwjlw1314/DWJ-PROJECT/raw/master/PictureSource/1.17.1.jpg)

二． 在linux系统中创建分区和进行格式化

首先fdisk –l命令查看现在的分区情况
>[root@dwj ~]# fdisk -l
```
需要特别注意对于扩展分区的话如果你sda3没有都用的话，再建立的新分区sda3大小只能为1M。
所以这时需要创建一个sda3新分区后再创建一个分区sda4才可以完全利用剩下的你刚刚扩展的硬盘空间。
这是因为磁盘分区采用的mbr模式，sda1,2,3为主分区大小地址有限制
```

创建分区，依次键入 n,p,w
>[root@dwj ~]# fdisk /dev/sda         #扩展硬盘输入  <br>
>[root@dwj ~]# fdisk /dev/sdb         #添加硬盘输入

重启linux，对新建分区格式化
>[root@dwj ~]# mkfs.ext4 /dev/sda4     #扩展硬盘的方法  <br>
>[root@dwj ~]# mkfs.ext4 /dev/sdb1     #添加新硬盘的方法

挂载分区,在根目录下创建新disk目录
>[root@dwj ~]# mkdir /disk              <br>
>[root@dwj ~]# mount /dev/sda4 /disk    #将新分区mount到/disk目录上

设置开机启动挂载，添加如下内容
>[root@dwj ~]# vim /etc/fstab
/dev/sdb1   /oracle   ext4    defaults   0 0

linux下获取磁盘MBR分区信息
>[root@dwj ~]# dd if=/dev/sda of=mbr.hex bs=512 count=1

linux下查看磁盘MBR分区信息
>[root@dwj ~]# hexdump -C mbr.hex
```
00000000  eb 63 90 10 8e d0 bc 00  b0 b8 00 00 8e d8 8e c0  |.c..............|
00000010  fb be 00 7c bf 00 06 b9  00 02 f3 a4 ea 21 06 00  |...|.........!..|
00000020  00 be be 07 38 04 75 0b  83 c6 10 81 fe fe 07 75  |....8.u........u|
00000030  f3 eb 16 b4 02 b0 01 bb  00 7c b2 80 8a 74 01 8b  |.........|...t..|
00000040  4c 02 cd 13 ea 00 7c 00  00 eb fe 00 00 00 00 00  |L.....|.........|
00000050  00 00 00 00 00 00 00 00  00 00 00 80 01 00 00 00  |................|
00000060  00 00 00 00 ff fa 90 90  f6 c2 80 74 05 f6 c2 70  |...........t...p|
00000070  74 02 b2 80 ea 79 7c 00  00 31 c0 8e d8 8e d0 bc  |t....y|..1......|
00000080  00 20 fb a0 64 7c 3c ff  74 02 88 c2 52 be 05 7c  |. ..d|<.t...R..||
00000090  b4 41 bb aa 55 cd 13 5a  52 72 3d 81 fb 55 aa 75  |.A..U..ZRr=..U.u|
000000a0  37 83 e1 01 74 32 31 c0  89 44 04 40 88 44 ff 89  |7...t21..D.@.D..|
000000b0  44 02 c7 04 10 00 66 8b  1e 5c 7c 66 89 5c 08 66  |D.....f..\|f.\.f|
000000c0  8b 1e 60 7c 66 89 5c 0c  c7 44 06 00 70 b4 42 cd  |..`|f.\..D..p.B.|
000000d0  13 72 05 bb 00 70 eb 76  b4 08 cd 13 73 0d 5a 84  |.r...p.v....s.Z.|
000000e0  d2 0f 83 de 00 be 85 7d  e9 82 00 66 0f b6 c6 88  |.......}...f....|
000000f0  64 ff 40 66 89 44 04 0f  b6 d1 c1 e2 02 88 e8 88  |d.@f.D..........|
00000100  f4 40 89 44 08 0f b6 c2  c0 e8 02 66 89 04 66 a1  |.@.D.......f..f.|
00000110  60 7c 66 09 c0 75 4e 66  a1 5c 7c 66 31 d2 66 f7  |`|f..uNf.\|f1.f.|
00000120  34 88 d1 31 d2 66 f7 74  04 3b 44 08 7d 37 fe c1  |4..1.f.t.;D.}7..|
00000130  88 c5 30 c0 c1 e8 02 08  c1 88 d0 5a 88 c6 bb 00  |..0........Z....|
00000140  70 8e c3 31 db b8 01 02  cd 13 72 1e 8c c3 60 1e  |p..1......r...`.|
00000150  b9 00 01 8e db 31 f6 bf  00 80 8e c6 fc f3 a5 1f  |.....1..........|
00000160  61 ff 26 5a 7c be 80 7d  eb 03 be 8f 7d e8 34 00  |a.&Z|..}....}.4.|
00000170  be 94 7d e8 2e 00 cd 18  eb fe 47 52 55 42 20 00  |..}.......GRUB .|
00000180  47 65 6f 6d 00 48 61 72  64 20 44 69 73 6b 00 52  |Geom.Hard Disk.R|
00000190  65 61 64 00 20 45 72 72  6f 72 0d 0a 00 bb 01 00  |ead. Error......|
000001a0  b4 0e cd 10 ac 3c 00 75  f4 c3 00 00 00 00 00 00  |.....<.u........|
000001b0  00 00 00 00 00 00 00 00  b2 45 01 00 00 00 80 20  |.........E..... |
000001c0  21 00 83 aa 28 82 00 08  00 00 00 00 20 00 00 aa  |!...(....... ...|
000001d0  29 82 8e fe ff ff 00 08  20 00 00 f8 5f 3e 00 00  |)....... ..._>..|
000001e0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
000001f0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 55 aa  |..............U.|
00000200
```

说明:
```
1、最前面的一列是8进制的位偏移，所以每行有16个字节了
2、mbr总共512字节，前446个字节是主引导记录，是bios加电自检后要运行的代码
3、从第447个字节开始后的64个字节，每16个字节为一组，是硬盘分区表，就是上面彩色标记的部分了
所以在MBR环境下主分区只能有4个，每个分区最大为2T
4、55aa是硬盘有效标志，若被篡改则系统认为硬盘损坏.早期一些dos下的病毒喜欢篡改这个标志，造成
硬盘损坏，但是分区还在
```
